# 실시간 데이터 전송

http에도 실시간성을 보장하는 기법이 존재하다.

## Polling, Long Polling, Streaming

### Polling

클라이언트가 일정 주기로 서버에 요청을 보내는 방식이다.

`Polling 단점`

주기만큼 지연이 발생할 수 있다.

> 서버가 갖고 있는 상태의 변화에 즉각적으로 반응하지 못한다.

real-time 통신에서는 언제 통신이 발생할지 예측 불가능  
-> 불필요한 request와 connection이 발생할 수 있다.

> 요청의 주기가 짧다면 반응성이 높아지지만, 서버에 부하가 걸릴 수 있다.

### Long Polling

Polling을 개선한 방식으로, 서버가 클라이언트의 요청에 대해 즉각적으로 응답하지 않고,  
서버가 데이터를 갖고 있을 때까지 클라이언트의 요청을 대기시킨 후 응답을 보내는 방식이다.

이 방식을 이용하면 데이터의 업데이트에 반응하는 속도는 빨라지지만 서버의 부담이 커진다.

### Streaming

서버가 클라이언트에게 데이터를 보내는 방식이다.

클라이언트가 서버에 요청을 보내면, 서버는 데이터를 보내고 연결을 유지한다.  
이후 서버가 데이터를 갖고 있으면 클라이언트에게 보내고, 데이터가 없으면 연결을 유지한 채로 대기한다.

> 그냥 하나의 데이터를 보내고 연결을 끊는 것이 아니라, 계속 연결을 유지하고 있다가 데이터가 생기면 보내는 방식이다.

---

### 3가지 방식의 단점

위 세가지 방식 모두 서버에 부하를 줄 수 있다.

1. 클라이언트와 서버가 계속 연결을 유지해야 하기 때문에 서버의 부담이 커진다.
2. 클라이언트가 요청을 먼저 보내야 하기 때문에 서버가 클라이언트에게 데이터를 보내는 것이 불가능하다.

---

결국 클라이언트가 서버의 데이터를 받으려면,  
클라이언트가 추가적으로 요청을 보내야 하며, 이는 서버에 부하를 줄 수 있다.

---

## WebSocket

---

## Server-Sent Events 

---

## WebRTC

### RTC란

---

### gRPC

gRPC는 구글에서 만든 RPC 프레임워크이다.  
HTTP/2 기반으로, Protocol Buffers를 사용한다.

gRPC의 장점은 다음과 같다.
1. HTTP/2 기반으로, 효율적인 통신이 가능하다.
2. Protocol Buffers를 사용하여, 데이터를 효율적으로 전송할 수 있다.

> Protocol Buffers는 데이터를 직렬화하여 전송하는 방식이다.  
> (JSON보다 빠르고, 데이터를 작게 전송할 수 있다)
> 
> gRPC는 통신하기 전 양쪽 모두 `proto` 파일을 작성해야 한다.  
> (통신할 데이터의 형식을 정의하는 파일)
> 
> 이 파일에서 데이터의 형식과 번호를 정의한다.  
> 데이터를 직렬화 할 때 변수명 대신 번호를 사용한다.  
> (이를 통해 데이터를 작게 전송할 수 있다)

---