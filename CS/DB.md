# DB 정리

**데이터베이스(DataBase)**

일정한 규칙, 혹은 규약을 통해 구조화되어 저장되는 데이터의 모음

**DBMS(DataBase Management System)**

데이터베이스를 제어, 관리하는 통합 시스템

DB 안에 있는 데이터들은 특정 DBMS마다 정의된 쿼리언어(query language)를 통해 삽입, 삭제, 수정, 조회 등을 수행할 수 있다.

DB는 실시간 접근과 동시공유가 가능하다.

<img src="184-1.jpg" width=200>

위 그림처럼 DB 위에 DBMS가 있고 그 위에 응용 프로그램이 있다.

이러한 구조를 기반으로 데이터를 주고받는다.

> 응용프로그램 예시: Node.js, Spring, ...
> DBMS 예시: MySQL, Oracle, ...

**엔티티(Entity)**

사람, 장소, 물건, 개념 등 여러 개의 속성을 지닌 명사를 의미

> 회원이라는 엔티티가 있다면 회원은 이름, 아이디, 주소, 전화번호 등의 속성을 갖는다.
>
> <img src="185.jpg" width=200>

엔티티는 약한 엔티티와 강한 엔티티로 나뉜다.

예를 들어 A가 혼자서는 존재하지 못하고, B의 존재여부에 따라 종속적이라면 A는 약한 엔티티이고, B는 강한 엔티티가 된다.
> 방과 건물, 방은 건물 안에만 존재 -> 방은 약한 엔티티, 건물은 강한 엔티티

**릴레이션**

릴레이션(Relation)은 DB에서 정보를 구분하여 저장하는 기본 단위

엔티티에 관한 데이터를 DB는 릴레이션 하나에 담아서 관리함
> 릴레이션은 관계형 데이터베이스에서는 '테이블'이라고 한다.
> NoSQL DB에서는 '컬렉션'이라고 한다.

**테이블과 컬렉션**

DB의 종류는 크게 관계형 DB와 NoSQL DB로 나눌 수 있다.

이중 대표적인 관계형 DB인 MySQL과 NoSQL DB인 MongoDB를 예로 들면,

MySQL의 구조는 레코드-테이블-DB로 이루어져 있고,

MongoDB의 구조는 도큐먼트-컬렉션-DB로 이루어져 있다.

<img src="187.jpg" width=500>

관계형 DB의 구조 그림

**속성**

속성(attribute)은 릴레이션에서 관리하는 구체적이며 고유한 이름을 갖는 정보

**도메인**

도메인(domain)이란 릴레이션에 포함된 각각의 속성들이 가질 수 있는 값의 집합
> 성별이라는 속성의 도메인: [남, 여]

**필드와 레코드**

<img src="188_2.jpg" width=500/>

회원이라는 엔티티는 member라는 테이블로 속성인 이름, 아이디 등을 가지고 있으며 name, ID, address 등의 '필드'를 가진다.

이 테이블에 쌓이는 행(row) 단위의 데이터를 '레코드'또는 '튜플'이라고 한다.

**필드 타입**

필드는 타입을 갖는다.

MySQL 기준 숫자 타입

|타입|용량(바이트)|최솟값(부호 있음)|최솟값(부호 없음)|최댓값(부호 없음)|최댓값(부호 있음)|
|--|--|--|--|--|--|
|TINYINT|1|-128|0|127|255|
|SMALLINT|2|-32768|0|32767|65535|
|MEDIUMINT|3|-8388608|0|8388607|16777215|
|INT|4|-2147483648|0|2147483647|4294967295|
|BIGINT|8|-263|0|263-1|264-1|

날짜 타입으로는 DATE, DATETIME, TIMESTAMP 등이 있다.
> DATE: 날짜 부분은 있지만, 시간 부분은 없는 값에 사용, 3바이트 용량
> DATETIME: 날짜 및 시간 부분을 모두 포함하는 값에 사용, 8바이트 용량
> TIMESTAMP: 날짜 및 시간 부분을 모두 포함하는 값에 사용, 4바이트 용량

문자 타입으로는 CHAR, VARCHAR, TEXT, BLOB, ENUM, SET이 있다

> CHAR와 VARCHAR 모두 그 안에 수를 입력해서 몇자까지 입력할지 정한다.
> CHAR는 테이블을 생성할 때 선언한 길이로 고정된다. 0~255
> VARCHAR는 가변길이의 문자열, 10글자를 저장할 경우, 10글자 + 길이기록용 1바이트로 저장하게된다.

> TEXT와 BLOB 두개의 타입 모두 큰 데이터를 저장할때 쓰는 타입
> TEXT는 큰 문자열 저장에 쓰여 주로 게시판의 본문을 저장할때 쓴ㄴ다.
> BLOB은 이미지, 동영상 등 큰데이터 저장에 쓴다.
>> 그러나 보통은 아마존의 이미지 호스팅 서비스인 S3를 이용하는 등 서버에 파일을 올리고 파일에 관한 경로를 VARCHAR로 저장합니다.

> ENUM과 SET 모두 문자열을 열거한 타입
>
> ENUM은 ENUM('X-SMALL', 'SMALL') 형태로 쓰이며, 이중에서 하나만 선택하는 단일 선택만 가능하고, ENUM 리스트에 없는 잘못된 값을 삽입하면 빈 문자열이 대신 삽입된다. 
>
> ENUM을 사용하면 ENUM 리스트의 문자열들이 0,1등으로 매핑되어 메모리를 적게 사용하는 이점을 얻는다.
> ENUM은 최대 65535개의 요소들을 넣을 수 있다.
>
> SET은 ENUM과 비슷하지만 여러개의 데이터를 선택할 수 있고, 비트 단위의 연산을 할 수 있으며, 최대 64개의 요소를 집어넣을 수 있다는 점이 다르다.
>
> ENUM과 SET을 쓸 경우 공간적으로 이점을 볼 수 있지만, 애플리케이션의 수정에 따라 리스트의 목록을 수정해야한다는 단점이 있다.

