# 락(Lock)

DB에 여러 사용자들이 같은 데이터를 동시에 접근하는 상황에서,  
데이터의 무결성과 일관성을 지키기 위해 사용하는 것

## 락의 종류

### 낙관 락(Optimistic Lock)
데이터 갱신시 충돌이 발생하지 않을 것으로 예상하므로 우선적으로 락을 걸지는 않음(비선점적)  
버전을 이용해 관리. 조회를 다시 수행했을 때 버전이 다르면 예외를 터트림. (예방이 아닌 사후 처리)

(데이터베이스 단에서 거는 락이 아니라, 어플리케이션 단에서 처리)

### 비관 락(Pessimistic Lock)
데이터 갱신시 충돌이 계속 발생할 것으로 예상하므로 조회를 할때부터 우선적으로 락을 검(선점적)  
데드락이 발생할 수 있음

(데이터베이스 단에서 거는 락)

> 비관 락은 두가지로 나뉜다.
> 
> Shared Lock: 읽기는 동시에 되지만 수정, 삭제 (Update, Delete) 은 락으로 막음  
> Exclusive Lock: 읽기, 수정, 삭제 모두 락으로 막음
