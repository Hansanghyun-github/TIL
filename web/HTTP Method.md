# HTTP Request Method

HTTP는 Request Method를 정의하여, 주어진 리소스에 수행하길 원하는 행동을 나타낸다.

---

## HTTP Method 종류

### GET

특정한 리소스를 가져오도록 요청하는 메서드

GET 요청을 할때, 메시지 바디는 비워두고,  
query(쿼리 파라미터, 쿼리 스트링)를 통해서 데이터를 전달하는 것을 권장한다.

### HEAD

특정 리소스를 GET 메서드로 요청했을 때 돌아올 헤더를 요청한다.
(HEAD 메서드에 대한 응답은 본문을 가져선 안되며, 본문이 존재하더라도 무시해야 한다)

### POST

서버에 데이터를 전송할 때 사용하는 메서드
(메시지 바디를 통해 서버로 요청 데이터를 전송)

서버는 Request로 받은 데이터를 처리한다

(Request Body의 유형은 `Content-Type` 헤더로 나타낸다)

> POST 요청은 요청 데이터를 어떻게 처리할지 리소스마다 따로 정해야 한다.  
> (정해진 것이 없다)

POST 사용 예시
1. 새 리소스 생성(등록)
2. 요청 데이터 처리
3. 다른 메서드로 처리하기 애매한 경우

### PUT

리소스를 대체, 해당 리소스가 없다면 생성

대상 리소스를 나타내는 데이터가 없고, PUT 요청이 성공적으로 하나를 새로 생성한 경우,  
서버는 반드시 클라이언트에게 201 (Created) 응답을 보내 해당 사항을 알려줘야 한다.

대상 리소스를 나타내는 데이터가 있고, PUT 요청을 통해 성공적으로 수정했다면,  
서버는 반드시 200 (OK) 또는 204 (No Content) 응답을 보내 성공을 알려줘야 한다.

> 클라이언트가 리소스를 식별한다.
> (클라이언트가 리소스 위치를 알고 URL을 지정한다 - POST와의 차이점)

> `POST`와 `PUT`의 핵심적인 차이점은,  
> `PUT`는 멱등이 적용되지만, `POST`는 그렇지 않다.

> PUT 주의할 점
> 
> 리소스를 완전히 대체한다.
> 
> 이미 어떤 리소스에 대한 데이터가 있어도,  
> 해당 리소스에 대해 PUT 요청을 하면  
> 요청 데이터로 바뀐다.

### PATCH

리소스를 부분적으로 변경할 때 사용하는 메서드

### DELETE

리소스를 삭제할 때 사용하는 메서드

### OPTIONS

HTTP OPTIONS 메서드는 주어진 URL 또는 서버에 대해 허용된 통신 옵션을 요청한다.  
클라이언트는 이 방법으로 URL을 지정하거나 별표(*)를 지정하여 전체 서버를 참조할 수 있다.

> 주로 CORS에서 사용한다.

### CONNECT

요청한 리소스에 대해 양방향 연결을 시작하는 메소드  
이는 터널을 열기 위해서 사용될 수 있다.

SSL(HTTPS)를 사용하는 웹사이트에 접속하는데 사용될 수 있다.

CONNECT는 홉바이홉 메서드

> 홉바이홉 메서드  
> (HTTP/2 프로토콜에서 사용되는 용어)  
> 프록시와 같은 중간 서버를 거칠 때에는 해당 중간 서버에서만 적용되어야 하는 메서드

### TRACE

클라이언트가 서버로 요청을 보내었을 때, 그 요청이 서버에 도달했을 때 어떻게 변경되었는지를 확인하기 위해 사용된다.

(대상 리소스에 대한 경로를 따라 메시지 루프백 테스트를 수행할 때 사용된다고 한다)

> TRACE 요청을 수신하는 서버가 클라이언트로부터 전달된 데이터를 그대로 반환하기 때문에  
> TRACE 메서드는 주로 디버깅 및 진단 목적으로 사용되며, 일반적인 웹 애플리케이션에서는 사용되지 않는 것이 좋다.

---

## HTTP Method 특징

### 안전(Safe)

호출해도 리소스를 변경하지 않는다는 특징

`GET`, `HEAD`, `OPTIONS`, `TRACE`가 해당 된다.

> 메서드를 호출해 로그가 쌓일 수 있다.  
> 안전은 해당 리소스만 고려한다.  
> 로그까지는 고려하지 않는다.

### 멱등(Idempotent)

한번 호출하든 N번 호출하든 결과는 똑같다는 특징  
(외부 요인으로 인한 리소스 변경은 고려하지 않는다)

`GET`, `HEAD`, `PUT`, `DELETE`, `OPTIONS`, `TRACE`가 해당 된다.

> 멱등의 활용  
> -> 자동 복구 메커니즘  
> (서버가 TIMEOUT으로 정상 응답을 못 줬을 때, 클라이언트가 같은 요청을 다시해도 괜찮은지에 대한 근거)

>  `PATCH`를 `PUT`과 같은 방식으로 사용함으로써 멱등성을 가지게 할 수도 있다.

### 캐시 가능(Cacheable)

응답 결과를 캐싱해도 된다는 특징

`GET`, `HEAD`, `POST`가 해당 된다.

> 실제로는 `GET`, `HEAD` 정도만 캐시로 사용
> (`POST`는 본문 내용까지 캐싱해야 한다 -> 구현이 쉽지 않다)

> `PUT`도 서버의 구현에 따라 캐시가 가능하게 할 수도 있다.

