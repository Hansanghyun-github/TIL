## ddl-auto를 create로 설정하면서 발생한 문제

### 개요

기존 로컬에서 스프링 + JPA 서버를 테스트 할 때 ddl-auto를 create로 설정하고 개발을 진행했었다.  

그런데 로컬에서의 DB 데이터 상황과 테스트 서버의 DB 데이터 상황이 달라서,  
테스트 결과가 약간 다른 점이 마음에 걸렸다.

그래서 로컬 WAS 서버를 테스트 서버의 DB와 연결하여 테스트를 진행하려고 했는데,  
ddl-auto를 create로 설정하면서 발생한 문제가 있었다.

> ddl-auto: create  
> -> 서버가 실행될 때마다 테이블을 새로 생성한다.
> (기존 테이블이 존재하면 삭제 후 생성)

### 해결 - 1. 바이너리 로그를 사용한 데이터 백업

// todo

### 해결 - 2. DB에 접근하는 유저의 권한 제한

로컬 WAS 서버와 DB를 연결할 때,  
로컬 서버의 DB가 아닌, dev 서버나 테스트 서버의 DB와 연결할 떄는  
당연히 ddl-auto를 create로 설정하면 안된다.

> validate나 none으로 설정해야 한다.

하지만 이는 개발자의 실수로 인한 문제이기 때문에,  
DB 자체에서 이런 실수를 방지해야 한다.

따라서 WAS에서 DB에 접속하는 유저의 권한을 제한해야 한다.

> WAS에서 DB에 접속하는 유저의 권한을 제한한다.  
> (DML만 가능하도록)

> 절대 admin 권한을 가진 유저로 접속하지 않도록 한다.

