# 단어 빈도수 API 최적화

## 문제 상황

현재 단어 빈도수 API를 호출했을 떄  
이 요청의 처리 과정은 다음과 같다.

1. 최근 한달 내의 articles에 있는 모든 단어를 가져온다.
2. 가져온 단어들을 형태소 분석한다.
3. 형태소들을 빈도수로 계산한다.
4. 빈도수가 높은 순으로 정렬하여 반환한다.

### 문제점 1 - 한달 내의 모든 articles 가져오기

단어 빈도수 API는 최근 한달 내의 articles에 있는 단어들을 가져오는 API이다.

이때 항상 모든 articles을 가져오기 때문에  
데이터가 많아질수록 처리 시간이 길어진다.

그리고 어떤 유저가 요청하든 항상 같은 결과를 반환한다.

그리고 만약 오늘 하루에 articles 관련 쓰기 작업이 없을 경우,  
오늘 하루 동안은 단어 빈도수 API가 항상 같은 결과를 반환한다.

-> 한달 내의 articles을 가져오는 것은 비효율적이다.

### 문제점 2 - 형태소 분석 라이브러리 사용

현재 형태소 분석을 위해 사용하는 라이브러리는 `KOMORAN`이다.

이 라이브러리를 사용하면서 OOM(Out Of Memory)이 발생했다.  
(그것도 스프링을 처음 실행했을 때)

위를 해결하기 위해 좀 더 가벼운 버전으로 변경했지만,  
여전히 메모리 사용량이 많이 나타났다.

## 해결 과정