### 7 모바일 보안

#### 모바일 운영체제의 역사

팜 OS - 1996년에 개발된 운영체제, 개인용 정보 단말기(달력, 메모 등)<br>
윈도 CE - MS가 만든 모바일 전용 운영체제
블랙베리 OS - 모바일 운영체제, 메세지 & email<br>
IOS - 애플의 모바일 운영체제(처음에는 OS X였음 - 맥북의 운영체제)
안드로이드 - 구글과 핸드폰 업체들이 개발한 개방형 모바일 운영체제(2007 시작 HTC의 Dream)

#### 모바일 운영체제의 보안과 취약점

`IOS`<br>
IOS는 보안에 대한 기본적인 통제권을 애플이 소유하고 있음<br>
애플은 보안 모델을 기초로 4가지의 시스템 보안 체계를 가짐
1. 안전한 부팅 절차 확보 - 애플 암호화 로직의 서명된 방식에 의해 무결성 확인 후 동작
2. 시스템 소프트웨어 개인화 - 애플의 아이튠즈를 배포, 다운그레이드 금지
3. 응용 프로그램에 대한 서명 - 모든 앱에 대해 코드 무결성 사인
4. 샌드박스 활용 - 앱끼리 데이터 주고 받을 수 없음, 시스템 파일 접근 금지, 음악, 문서 주고받는건 시스템 API 이용

> 애플 이외에도 멀티태스킹과 연격지에서 IOS 로그인을 금지함
>
> IOS의 보안상의 문제점은 대부분 탈옥(jailbreak)한 IOS 기기에서 발생<br>
> (IOS의 루트의 패스워드는 alpine으로 설정되어 있음(옛날))<br>

`안드로이드`<br>
(안드로이드는 리눅스 커널을 기반으로 함)<br>
사용자의 선택에 따라 보안 수준을 선택할 수 있음 -> 각종 바이러스와 악성코드가 유포되었으며 백신이 보급되고 있음

![Alt text](image-13.png)

`모바일기기의 취약점은 이동성`

무선 랜의 경우 노트북을 수신율이 높은 안테나를 붙여서 차를 타고 보안이 취약한 무선 랜을 탐색하여 해킹을 시도 -> 워 드라이빙

`블루투스의 취약점과 위협`
1. 블루프린팅(청사진 - 해킹하기전에 시스템의 기본적인 설계도를 확보하는 것)
2. 블루스나프 - 블루트스의 취약점을 이용하여 장비의 임의 파일에 접근하는 공격(OPP를 사용하여 정보를 열람)
3. 블루버그 - 블루트스 장비간 취약한 연결 관리를 악용한 공격(블루투스 기기는 한 번 연결되면 이후에는 다시 연결해주지 않아도 서로 연결됨)

---

RSA에서 p와 q는 PRNG에서 정해준다.
$e*d = 파이(n)*t+1 === 1 mod 파이(n)$
1< e < 파이(n)

해시함수의 가장큰특징은 일방향성 & representation(재현성 - 오늘과 어제의 결과가 같다) & 무결성

(메모)

---
### 8 암호에 대한 이해

![Alt text](image-14.png)

전치법 - 암호문과 봉의 굵기를 알려주면, 암호문을 봉에 감아서 해석하는 방식<br>
-> 봉의 굵기가 암호화 키

대체법: 해당 글자를 다른 글자로 대체하여 암호화하는 방법
> a -> b, z -> a - 시저 암호(순서가 있음)
>
> 그냥 랜덤 - 모노 알파베틱 암호(경우의 수가 26!)

비즈네르 암호화: 26×26의 알파벳 대칭표를 이용해서 암호화하고자 하는 평문과 암호화키의 맵핑을 이용하
	여 암호화와 복호화를 수행하는 방식

플레이페어 암호: 2개로 이뤄진 문자 쌍을 다른 문자 쌍으로 대체하는 암호화 방법 

![Alt text](image-15.png)  
(BE -> GO)

#### 대칭 암호화 방식

암호학적 강도를 높일 때는 혼돈과 확산을 이용
> 혼돈 : 암호문의 통계적 성질과 평문의 통계적 성질의 관계를 난해하게 만드는 성질  
확산 : 각각의 평문 비트와 키 비트가 암호문의 모든 비트에 영향을 주는 성질

`DES 알고리즘`  
64비트 블록 암호화 알고리즘, 56비트 크기의 암호화 키로 암호화됨  
생성 가능한 암호화 키는 $2^{56}$가지

방법(DES 암호화, 복호화 과정 그림 이해 필요)
1. 하나의 블록인 64비트를 L1(32비트)과 R1(32비트)으로 나눔
2. R1을 암호화 키로 생성한 S-Box로 f 함수를 만들어 치환 작업을 한 후 이 값을 L1과 XOR한 다음 L2와 R2의 위치를 바꿈

암호화 과정 한 단계를 라운드(round)라 표현
DES는 이러한 과정을 하나의 블록에 대해 알고리즘을 16번 수행하므로 16라운드 알고리즘

복호화는 암호화의 반대로 수행

`트리플 DES 알고리즘`  
암호화 및 복호화 과정에서 2개의 암호화 키를 사용
<img src="image-20.png" width=400>

`이 외 알고리즘`  
AES 알고리즘, SEED 알고리즘, ARIA 알고리즘, IDEA, RC5, Skipjack

#### 비대칭 암호화 방식

`등장 배경`  
대칭 암호화 방식으로는 암호화 키 교환의 문제를 해결할 수 없었음.   
이를 위해 비대칭 암호화 방식이 연구됨.

`RSA 암호화 알고리즘` - 소수를 이용한 알고리즘

암호에 필요한 키는 공개한다.  
암호를 풀 수 있는 키는 비공개한다.

<img src="image-16.png" width=500/>

![Alt text](image-17.png)

필요한 수학 개념
1. $a^{\phi(n)} \equiv 1$ (mod n) (a와 n이 서로소인 자연수일 때)
2. $a^{p-1} \equiv 1$ (mod p) (자연수 a와 소수 p가 서로소일 때)

>여기서 $a \equiv b$ (mod n)이 의미하는 것은  
a를 n으로 나눴을 때의 나머지와 b를 n으로 나눴을 때의 나머지가 같다는 뜻이다.

<img src="image-19.png" width=300>

공개키 - <N, e>  
비공개키 - <N, d>

공개키 & 비공개키 정하는 방법
1. 소수인 p와 q를 설정
2. N = p x q
3. $\phi(n)$ 찾는다 ($\phi(n)$ = (p-1)(q-1))
4. $\phi(n)$와 서로소인 e를 찾는다. (1 < e < $\phi(n)$)
5. $ed \equiv 1$ (mod $\phi(n)$)인 d를 찾는다. (ed = k $\phi(n)$ + 1)

> 평문 = $x$ ($x$은 N와 서로소)  
암호화: $x^e \equiv M$ (mod N)  
암호문 = M  
복호화: $M^d \equiv x$ (mod N)
평문 $x$ 얻음

---

`비대칭 암호화의 구조`  
각 개인이 공개키(public key)와 개인키(private key)를 소유하는 구조

대부분 공개키를 이용해 암호화하고, 개인키를 통해 복호화한다.

`비대칭 암호화의 기능`  
1. 기밀성
2. 부인 방지 - 철수의 개인키로 암호화된 편지는 철수의 공개키로만 열 수 있으므로, 상대방은 그 편지가 철수가 쓴 것임을 확신할 수 있음

### 해시

`해시의 정의`  
하나의 문자열을, 이를 상징하는 더 짧은 길이의 값이나 키로 변환하는 것

(해시를 이용하면 해시값을 통해 해시되기 전의 값을 추측하는 것이 불가능)

---

secret key-공개키?
d=

한국인터넷증흥원 - KISA

`네트워크 구조 모델은 인증기관의 상호인증(crosscertification)`

정보통신부 -> 과기정통부(민간영역)

행정자치부 -> 행정안전부()

현재 인증서는 X.509 버전 3 <- 외워

PGP 인증 -> 1과3이 관계가 없어도, 1-2, 2-3 관계가 있다면 1-3도 관계 가능

공인인증서 폐기 목록 방식
1. Positive rule - 들어올 수 있는 사람들을 저장
2. Negative rule - 들어오면 안되는 사람만 저장

전자봉투의 핵심은 복호화에 필요한 비밀키를 `따로` 보내는 것

공개키? 비밀키? 사설키? 개인키?

SET은 특정 업체의 프로토콜이라 시험내기 애매하다 함
(개념만 이해)

SET의 이중서명(중요) - 구매정보와 지불정보를 각각 해시 & 두 해시값을 합친 뒤 다시 해시

이중서명의 목적 - 상점이 사용자의 계좌정보를 모르게 함

Cyper cash, First Virtual, 스마트카드 안중요

스테가노그래피 - 심층암호

---

# 9. 암호를 이용한 전자상거래

전자상거래의 보안 공격 유형
1. 인증에 대한 공격(다른 사용자로 위장)
2. 송/수신 부인 공격(거래 내역에 대해 부인하는 것)
3. 기밀성에 대한 공격(정보가 유출되는 것)
4. 무결성에 대한 공격(거래 정보가 변조되는 것)

## 공개키 기반 구조(PKI)
공개키 기반 구조(PKI, Public Key Infrastructure)는 메시지의 암호화 및 전자서명을 제공하는 복합적인 보안 시스템 환경

> 동사무소에 신분증을 제출해서 인증하는 구조  
> (인터넷에서) 동사무소: CA, 신분증: 공인인증서

공개키 기반 구조가 되기 위해서는 인증 정보를 일원화하여 호환성을 갖추고 있어야 하고 개인이 이를 쉽게 접근할 수 있어야 함  
(동사무소, 시청, 정부와 같은 트리형 구조가 필요)

`PAA(Policy Approval Authorities, 정책승인기관)` like 정부  
공인인증서에 대한 정책을 결정하고 하위 기관의 정책을 승인하는 기관  
미래창조과학부가 담당

`PCA(Policy Certification Authorities, 정책인증기관)` like 시청  
RootCA를 발급하고 기본 정책을 수립하는 기관  
우리나라의 KISA가 여기에 해당

> RootCA: 모든 인증서의 기초가 되는 인증서를 보유하고 있음  
인증서에 포함된 공개키에 대응되는 개인키로 생성한 자체 서명 인증서를 사용

`CA(Certification Authority, 인증기관)` like 동사무소  
PCA의 하위 기관으로 인증서 발급과 취소 등의 실질적인 업무를 하는 기관  
NCA, yessign 등이 이에 속함(상호 신뢰)

`RA(Registration Authority, 등로기관)`  
사용자의 신분을 확인하고 CA 간 인터페이스를 제공하는 기관

네트워크 구조 모델은 인증기관이 상호인증(crosscertification)을 통해 연결되어 있는 모델

> 상호인증: 두 인증기관이 상대방의 공개키를 서로 인증해주는 인증서를 발급하여 사용하는 것

공인인증서 폐기 목록 방식
1. Positive rule - 들어올 수 있는 사람들을 저장
2. Negative rule - 들어오면 안되는 사람만 저장

## 전자서명과 전자봉투

`전자서명`: 서명자가 해당 전자문서에 서명하였음을 나타내기 위해 전자문서에 첨부되거나 논리적으로 결합된 전자적 형태의 정보  
(인감도장: 공인인증서, 계약서: 전자계약서)

`전자서명의 원리`  
전자서명에는 원본의 해시값을 구한 뒤, 그 해시값에 부인방지 기능을 부여하기 위해 공개키 방법을 사용  
![Alt text](image-21.png)
받은사람은 상대방의 공개키를 이용해 암호화된 해시값을 복호화하고, 원본 문서를 해시한 값과 비교  
(일치하면 전달된 편지가 상대방으로부터 온것이고, 위조되지 않았음을 확신할 수 있음)
![Alt text](image-22.png)

`전자서명이 제공하는 기능`
1. 위조 불가
2. 인증
3. 재사용 불가
4. 변경 불가
5. 부인 방지

`전자봉투`  
전달하고자 하는 메시지를 암호화하고, 암호화 키는 따로 보내는 것을 암호학적으로 구현한 것

![Alt text](image-23.png)
![Alt text](image-24.png)

평문의 해시값을 `사설키`로 암호화  
평문, 암호화된 해시값, 보내는 사람의 인증서를 `비밀키`로 암호화 -> 암호문  
복호화에 필요한 비밀키를 `받는 사람의 공개키`로 암호화 -> 전자봉투  

전자봉투를 `받는 사람의 사설키`로 복호화 -> 암호문 해독할 비밀키 획득  
`전자봉투에서 얻은 비밀키`로 암호문을 해독 -> 평문, 보내는 사람의 인증서, 암호화된 해시값 얻음  
평문의 해시값과 암호화된 해시값을 `보내는 사람의 공개키`로 해독한 값을 비교 -> 같으면 문제 없음

전자봉투는 기밀성, 무결성, 부인 방지를 모두 지원함

## SET - 개념만 이해
SET(Secure Electronic Protocol): 비자와 마스터 카드 회사의 합의에 의해 만들어진 프로토콜

![Alt text](image-25.png)

## 암호화 통신

`전자우편의 암호화`

PGP를 사용하는 사람들끼리 신뢰 관계를 통해 인증

S/MINE - 인증서 서비스를 통하여 암호화되는 메일 서비스를 제공

PEM - 높은 보안성 but 구현의 복잡성

2계층 - PPTP, L2TP, L2F
![Alt text](image-26.png)

3계층 - IPSec(3계층의 암호화 프로토콜)  
IP 스푸핑이나 스니핑 공격에 대한 대응 방안이 될 수 있음  
주요 기능 
- AH(Authentication Header)를 통한 인증
- ESP(Encapsulation Security Payload)를 이용한 기밀성
- IKE(Internet Key Exchange)를 이용한 비밀키 교환

![Alt text](image-27.png)

4계층 - SSL(중요)

![Alt text](image-28.png)

