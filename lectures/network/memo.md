DDoS, DoS

보안의 3대 요소 - CIA

`기밀성(Confidentiality)`<br>
인가된 사용자만 정보 자산에 접근할 수 있는 것

`무결성(Integrity)`<br>
적절한 권한을 가진 사용자에 의해 인가된 방법으로만 정보를 변경할 수 있도록 하는 것

`가용성(Availability)`<br>
정보 자산에 대해 적절한 시간에 접근 가능한 것을 의미

    기밀성과 가용성은 반비례 관계

---

개발자들은 모니터링 방식에 대해 이해할 필요가 있다.

    특정 시점에 트래픽이 올라갔을 때 어떤일이 일어났는지 분석 필요

---

# 2 시스템 보안

## 2.1 시스템 보안에 대한 이해

운영체제의 권한 관리

Administrators - 모든 권한

Power Users - 위가 가진 대부분을 가짐



## 2.2 계정과 패스워드 관리




## 2.3 세션 관리

세션은 `사용자와 컴퓨터 또는 두 컴퓨터 간의 활성화된 접속`

## 2.4 접근 제어

## 2.5 권한 관리

## 2.6 로그 관리

## 2.7 취약점 관리

---

## 3.1 네트워크에 대한 이해

7계층은 그냥 외우자

세션관리는 5계층 세션계층에서 일어남

대부분의 프로그램(어플리케이션)은 7계층에서 작동함

---

`1계층 - 물리 계층`

1계층은 케이블 등 시스템 간의 물리적인 연결매체

1계층에서 구분기준은 전송속도(CAT), 두번째로 케이블 선의 분류(구리선의 보호 방식이나 꼬임 방식)

---

`2계층 - 데이터 링크 계층`

두 포인트 간 신뢰성있는 전송을 보장하기 위한 계층

상호 통신을 위해 MAC 주소를 받는다 (ipconfig /all 로 확인)

MAC 주소는 12개의 16진수로 구성 - 앞쪽 6개는 네트워크 카드를 만든 회사번호, 뒤 6개는 각 회사마다 임의로 붙인 번호

2계층에서 사용하는 통신 장비는 `스위치`(패킷의 흐름을 제어함)

패킷의 가장 앞단에는 출발지 MAC 주소, 목적지 MAC 주소가 있음

`3계층 - 네트워크 계층`

여러개의 노드를 거칠때마다 경로를 찾아주는 역할을 하는 계층

라우팅, 흐름 제어, 세그멘테이션, 오류 제어 등을 수행

경로를 찾기 위한 주소 - `IP`

    IP 주소는 8비트의 수 4개로 구성
    A,B,C,D,E 클래스가 있음
    A 클래스 - 첫번재 자리가 네트워크 주소, 나머지가 호스트 주소
    B 클래스 - 두번째 자리까지가 네트워크 주소, 나머지가 호스트 주소
    C 클래스 - 세번째 자리까지가 네트워크 주소, 나머지가 호스트 주소
    (D 클래스는 멀티미디어 방송을 할 때 자동으로 부여된다.)
    (E 클래스는 테스팅을 위한 주소 대역 & 사용 안함)

3계층에서 사용되는 네트워크 통신 장비 - `라우터`

    MAC vs IP

    MAC은 주민등록번호같은것 - 변하지 않음

    IP 주소는 내가 위치해 있는 곳 - 변할수있음

`4계층 - 전송 계층`

양끝단의 사용자들이 신뢰성 있는 데이터를 주고받을 수 있도록 함으로써, 상위 계층들이 데이터 전달의 유효성이나 효율성을 신경 쓰지 않도록해줌

대표적인프로토콜 TCP

여기선 `포트 번호`를 사용함 - 응용프로그램과 통하는 통로 번호

1 ~ 1024 포트는 자주 사용하는 서비스에 할당됨

    여기서 알아야할것
    1. 7계층
    2. 유명한 포트번호

3,4계층 정보는 netstat -an 명령으로 확인가능

```3-way hankshaking``` - 매우 중요, 그릴줄 알아야함(클라에서 SYN, 서버에서 SYN+ACK, 클라에서 ACK)

```TCP 세션의 종료``` - (클라에서 FIN, 서버에서 ACK, 시간좀 지나고 서버에서 FIN, 클라에서 ACK)

    TCP vs UDP

    TCP는 연결 지향 프로토콜, 흐름제어와 에러제어 등의 기능을 통해 확실한 전송을 보장함
    하지만 완전하지는 않음

    UDP는 데이터의 신뢰성있는 전송을 보장하지 않음, 전송 경로 확립을 위한 번잡함을 생략하고 시간을 절약할 수 있음

> 이더넷은 2계층의 스위치에서 사용되는 프로토콜

`5계층 - 세션 계층` - 양끝단의 응용 프로세스가 통신을 관리하기 위한 방법을 제공, 정보교환을 효과적으로 할수있는 추가 서비스 제공

`6계층 - 표현 계층` - 코드간의 번역을 담당, 데이터의 구조를 하나로 표현함으로써, 응용 계층의 데이터 형식 차이로 인한 부담을 덜어줌

`7계층 - 응용 프로그램 계층` - HTTP, FTP 등 제공

## 3.2 서비스 거부(Dos) 공격

Denier of Service - 그냥 훼방을 놓는 공격

Boink, Bonk, TearDrop 공격

    사실 이런 기법들은 거의다 막혀있음

DDoS - 분산 서비스 거부 공격

    DDoS는 해킹 기법

    DoS는 해킹 기법을 아우르는 개념

DDoS공격의 5가지 조건<br>
공격자, 마스터, 핸들러, 에이전트, 데몬

    공격자: 공격을 주도하는 해커의 컴퓨터
    마스터: 공격자에게 직접 명령을 받는 시스템으로 여러 대의 에이전트를 관리함
    핸들러 프로그램: 마스터 시스템의 역할을 수행하는 프로그램
    에이전트: 공격 대상에 직접 공격을 가하는 시스템
    데몬 프로그램: 에이전트 시스템의 역할을 수행하는 프로그램

봇넷: 좀비가 된 PC들의 네트워크

봇넷에 있는 각각의 PC를 좀비PC

## 3.3 스니핑 공격

수동적인 공격

도청, UTP 장비를 태핑(Tapping)해서 전기적 신호를 분석해 정보를 찾아내는 것

전기적 신호를 템페스트 장비를 이용해 분석하는 것

    스니핑 원리
    
    (네트워크에 접속하는 모든 시스템은 설정된 IP 주소값과 고유한 MAC 주소값을 가지고 있음)
    (2계층과 3계층에서 자신의 것과 일치하지 않는 패킷은 무시함)

    스니핑을 수행하는 공격자는 자신이 가지지 말아야할 정보까지 모두 볼 수 있어야 하므로 2계층과 3계층 정보를 이용한 필터링을 해제하는 랜카드의 모드를 사용 - 프러미큐어스(Promicuous) 모드

`스위치 재밍 공격` - 스위치의 주소 테이블의 기능을 마비시키는 공격 (MACOF 공격)<br>
스위치에 랜덤한 형태로 생성한 MAC을 가진 패킷을 무한대로 보내서, 저장 용량을 넘게되어 원래기능을 잃고 더미허브처럼 작동하게됨

`SPAN 포트 태핑 공격` - 포트 미러링을 이용한 것<br>
각 포트에 전송되는 데이터를 미러링하고, 포트에도 똑같이 보내주는 것<br>
SPAN포트는 기본적으로 하나의 설정사항으로 이뤄짐,<br>
but 포트 태핑은 하드웨어적인 장비로 제공되고 이를 Splitter라고 부르기도 함

스니퍼의 탐지 - 출석부를때 이름이 다른 학생이 출석하는 느낌?(다른 학생은 프러미큐어스 모드)

    여기서 출석이 탐지하는것
    이름이 다른 학생은 프러미큐어스 모드로 스니핑 공격중임

스니퍼 탐지 방법
1. Ping 이용 - 대부분의 스니퍼는 일반 TCP/IP에서 동작 - 존재하지않는 MAC주소를 보냈는데 응답이 왔다 -> 해당 호스트 스니핑중
2. ARP 이용 - ping과 유사, 위조된 ARP request보내서 응답오면 걸린것
3. DNS 이용 - 가짜 ID와 패스워드를 썼는데, 공격자가 그걸 이용하면 걸린것
4. ARP watch를 이용 - ARP 트래픽을 모니터링, 이를 변하게 하는 패킷이 탐지되면 메일로 알려줌

## 3.4 스푸핑 공격

속이는 공격

MAC, IP 주소, 포트 모든것을 공격할 수 있다(속일 수 있다)

`ARP 스푸핑 공격` - 클라와 서버 사이에 공격자 컴퓨터가 들어옴(상대방 MAC 주소가 자기자신이라고 속임)

클라와 서버는 이를 모르고 패킷을 주고받지만, 공격자 컴퓨터는 둘 사이의 패킷정보를 다 읽음

-> MAC 주소값을 고정시켜서 패킷을 주고받으면 이 공격 막을 수 있다.<br>
(IP 주소를 속이더라도 MAC주소는 속일 수 없기 떄문)

    클라는 서버에 해당하는 MAC 주소를 고정시키면, (arp -s)
    다른 컴퓨터가 중간에 가로챌 수 없다.

`IP 스푸핑 공격` - IP 주소를 속이는 것

    트러스트 인증법: 특정 IP의 패킷은 검사안하고 그냥 통과시킴, 유닉스 계열에서 사용
    (윈도우는 액티브 디렉토리 사용함)

    공격자가 해당 IP주소를 가지고 서버에 접근하는것
    (클라는 DoS 공격을 통해 접근 못하게 함)

`ICMP 리다이렉트 공격` - 공격자가 라우터가 되어 다른 라우터로 리다이렉트 시킴(이때 모든 패킷을 스니핑)

    ICMP 리다이렉트 - 로드 밸런싱에서 사용함

`DNS 스푸핑 공격` - 실제 DNS 서버 보다 빨리 공격 대상에게 DNS Response 패킷을 보내, 공격 대상이 잘못된 IP 주소로 웹 접속을하도록 유도하는 공격(공격자 컴퓨터가 DNS 서버 컴퓨터보다 클라와 가까이 있어야 가능한 공격)

## 3.5 세션 하이재킹 공격

세션(Session): 사용자와 컴퓨터, 또는 두 대의 컴퓨터 간의 활성화된 상태

세션 하이재킹: 두 시스템 간 연결이 활성화된 상태, 즉 로그인된 상태를 가로채는 것을 뜻함

TCP 세션 하이재킹 - 서버와 클라이언트에 각각 잘못된 시퀀스 넘버를 위조해서 연결된 세션에 잠시 혼란을 준뒤 자신이 끼어드는 방식(클라와 서버사이에 공격자 컴퓨터가 있어야함(ARP 스푸핑 등))

    다시 3-way handshaking을 통해, 공격자는 클라 대신 연결되어 있던 TCP 연결을 그대로 물려받음

    이에 대한 대응은 SSH을 쓰거나, 클라와 서버 사이 MAC 주소를 고정시킨다.

## 3.6 무선 네트워크 공격과 보안

무선 랜 - 기본적으로 이더넷과 비슷한 개념, 무선 랜을 사용하기 위해서는 내부의 유선 네트워크에 AP(Access Point) 장비를 설치해야 함

AP 보안 - 물리적인 보안 및 관리자 패스워드 변경, SSID 브로드캐스팅 금지

무선 랜 통신 암호화

---

# 4 웹 보안

## 4.1 웹에 대한 이해

알파넷이 인터넷의 시작

WWW 프로젝트의 목적은 전 세계에 흩어져 있는 종업원 및 연구자와 연구 결과나 아이디어를 공유할 수 있는 방법을 모색하는 것

## 4.2 HTTP에 대한 이해

HTTP 프로토콜

0.9 버전은 서버로부터 단순 읽기 기능만 지원 - 1연결 2request 3response 4close<br>
-> 너무 비효율적(텍스트와 그림마다 connect과정 반복했음)

    파일 업로드는 POST 방식으로만 할 수 있음
>
    HTTP Response

    100 - 정보전송, 200 - 성공, 300 - 리다이렉션, 400 - 클라 에러, 500 - 서버 에러


## 4.3 웹 서비스에 대한 이해

HTML(HyperText Markup Langauge) - 가장 단순한 형태의 웹 언어

클라가 특정 HTML 페이지를 요청하면 서버가 HTML 문서를 전송해줌 - 이를 정적인 웹 페이지라 함 -> 이를 통해 웹 서버의 무언가를 바꿀 수 있는 가능성이 낮다 = 공격 어려움

SSS(Server Side Script) - ASP나 JSP같은 동적인 페이지를 제공하는 스크립트

CSS(Client Side Script) - 자바스크립트같은 것들, 웹브라우저에 의해 해석되고 적용됨

## 4.4 웹 해킹에 대한 이해

웹 프록시를 통한 취약점 분석 - 클라가 웹 서버와 웹 브라우저 간에 전달되는 모든 HTTP 패킷을 웹 프록시를 통해서 확인하면서 수정하는 것이 가능

구글 해킹을 통한 정보 수집 - 구글 검색 엔진을 활용

    이를 막는법 - 서버의 홈 디렉토리에 robots.txt 파일을 만들어 검색할 수 없게 만듬



## 4.5 웹에 주요 취약점 10가지

(OWASP(th Open Web Application Security Project) - 국제 웹 보안 표준 기구)

(해마다 웹 관련 상위 10개 주요 취약점을 발표)

명령(SQL) 삽입 취약점

XSS 취약점 - 다른 사용자의 웹 브라우저 내에서 적절한 검증 없이 실행

    XSS(Cross Site Scripting)은 공격자에 의해 작성된 스크립트가 다른 사용자에게 전달되는것

취약한 인증 및 세션 관리 - 그냥 로그인해놓고, JSESSIONID에서 userId를 다른 사람 걸로 바꿔서 인증시도

직접 객체 참조 - 디렉터리 탐색, 파일 업로드 제한 부재, 리버스 텔넷

CSRF 취약점

    CSRF(Cross Site Request Forgery)
    불특정 다수를 대상으로 로그인된 사용자가 자신의 의지와는 무관하게 공격자가 의도한 행위를 하게 만드는 공격

    이게 성립하려면 행위에서 사용자를 구분하는 파라미터 값이 존재하지 않아야함

보안 설정 취약점 - 디렉터리 리스팅, 백업 및 임시 파일 존재, 주석 관리 미흡

취약한 정보 저장 방식

URL 접근 제한 실패

인증시 비암호화 채널 사용

부적절한 오류 처리

## 4.6 웹 취약점 보안

특수문자 필터링

서버측 통제 작용

지속적인 세션 관리

---

코드 보안 건너뜀

---

## 6.1 악성코드
(mel-code)

악성코드의 정의 - 

악성코드의 분류
|이름|설명|
|--|--|
|바이러스|`복제와 감염` 특징이 있다|
|-|다른 네트워크의 컴퓨터로 스스로 전파되지는 않는다|
|웜||
|트로이 목마||
|인터넷 악성코드|성인,크랙사이트에 들어가면 자동감염|
|스파이웨어|| - key logger와 관련있음

악성프로그램으로 인해 발생하는 증상 - 그냥 한번 읽어봐

## 6.2 바이러스

    바이러스가 나쁜 것만은 아니다
    사람도 바이러스생기면, 항체가 생기고 면역력높아짐

    몇몇 사람들은 바이러스는 인터넷의 면역계 시스템이라고 주장한다 함

1세데: 원시형 바이러스

2세데: 암호형 바이러스

5세데 - 
프라이버시바이디자인(디폴트)(내정보와 관련없는 보안과관련있는 짜투리?정보들)




## 6.3 웜

`복제와 전파`가 목적이다.

-> 시스템, 인터넷 전송속도 느리게 하는게 주 목적


## 6.4 기타 악성코드

백도어 - 개발자나 관리자가 보안,방화벽,비밀번호 입력 한번에 접속하기 위한 루트

특정 포트번호 외울 필요없다

그냥 어떤 악성코드는 특정 포트 사용한다 정도만























>책 객관식,주관식보자

