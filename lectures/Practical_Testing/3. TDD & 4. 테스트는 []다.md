# 3. TDD(Test-Driven Development)

프로덕션 코드보다 테스트 코드를 먼저 작성하여 테스트가 구현 과정을 주도하도록 하는 방법론

    TDD에서 말하는 가장 중요한 핵심 방법이 `레드 그린 리팩토링`

    일단 실패하는 테스트를 먼저 작성 - 레드
    그다음 빠른 시간 내에 테스트를 통과하도록 구현부를 작성 - 그린(이때는 막해도 됨, 오직 초록불만 보기 위함)
    마지막으로 구현 코드를 개선, 테스트 통과를 유지하면서

> 이게 가능한 이유는 `테스트 코드가 우리의 기능 자체를 보장해주고 있기 때문`

TDD의 핵심 가치는 `피드백`

선 기능 구현, 후 테스트 코드를 작성하는 것의 문제점
1. 테스트 자체의 누락 가능성
2. 특정 테스트 케이스만 검증할 가능성 - 해피 케이스
3. 잘못된 구현을 다소 늦게 발견할 가능성

선 테스트 작성, 후 기능 구현의 장점
1. 복잡도가 낮은(유연하여 유지보수가 쉬운), 테스트 가능한 코드를 구현할 수 있게 된다.
2. 쉽게 발견하기 어려운 엣지(edge) 케이스를 놓지지 않게 해준다.
3. 구현에 대한 빠른 피드백을 받을 수 있다.
4. 과감한 리팩토링이 가능해진다.

`TDD: 관점의 변화`<br>
테스트와 상호 작용하며 발전하는 구현부<br>
-> `클라이언트` 관점에서 `피드백`을 주는 Test Driven

---

### 3장 키워드 정리

TDD, 레드-그린-리팩토링

추가적으로 알아보면 좋은 것 - 애자일 방법론, 익스트림 프로그래밍, 스크럼, 칸반

    익스트림 프로그래밍의 방법론 중 하나가 TDD이다.

---

# 4. 테스트는 []이다.

테스트는 `문서`다.

    문서?
    프로덕션 기능을 설명하는 테스트 코드 문서
    다양한 테스트 케이스를 통해, 프로덕션 코드를 이해하는 시각과 관점을 보완
    어느 한 사람이 과거에 경험했던 고민의 결과물을 팀 차원으로 승격시켜서, 모두의 자산으로 공유할 수 있다.

`우리는 항상 팀으로 일한다.`<br>
-> 내가 작성한 코드, 문서가 어떻게 비칠지 생각하는게 중요하다.

### DisplayName을 섬세하게

그냥 메서드 이름을 가지고 테스트에 쓰는 것은 모호하다.

테스트 메서드 하나가 어떤걸 테스트하고자 하는건지 알기 어렵다.

    Junit5에서 추가된 어노테이션 - @DisplayName

    이 어노테이션에 String 값을 넣어줘서 어떤 걸 테스트하는지 명시할 수 있다.

    (Junit4는 그냥 메서드에 직접 넣어야함(띄어쓰기는 언더바로))

>
    세팅의 Gradle 항목에서 테스트를 Gradle로 돌리는게 디폴트로 되어있다.
    IntelliJ IDEA로 바꿔주면 우리가 설정한 DisplayName을 띄울 수 있다.

명확한 제목을 짓는 법
1. 명사의 나열보다 문장으로
    >음료 1개 추가 테스트<br>-> 음료 1개를 추가할 수 있다

2. "~테스트" 지양하기

3. 테스트 행위에 대한 결과까지 기술하기
    > 음료 1개를 추가할 수 있다.<br>-> 음료 1개를 추가하면 주문 목록에 담긴다.

4. 도메인 용어를 사용하여 한층 추상화된 내용을 담기(메서드 자체의 관점보다 `도메인 정책` 관점으로)
    > 특정 시간 이전에 주문을 생성하면 실패한다.<br>-> `영업 시작 시간` 이전에는 주문을 생성할 수 없다.
5. 테스트의 현상을 중점으로 기술하지 말것
    > 4에서 실패한다는 말은 테스트 내용과 무관함

### BDD 스타일로 작성하기

BDD(Behavior Driven Development)

TDD에서 파생된 개발 방법

함수 단위의 테스트에 집중하기보다,
시나리오에 기반한 `테스트케이스` 자체에 집중하여 테스트한다.

개발자가 아닌 사람이 봐도 이해할 수 있을 정도의 추상화를 권잦ㅇ

    Given / When / Then

    Given: 시나리오 진행에 필요한 준비 과정(객체, 값, 상태 등)

    When: 시나리오 행동 진행

    Then: 시나리오 진행에 대한 결과 명시, 검증

    어떤 환경에서(Given),
    어떤 행동을 진행했을 때(When),
    어떤 상태 변화가 일어난다(Then).

    -> DisplayName을 명확하게 작성할 수 있다.

---

### 4장 키워드 정리

@DisplayName, Given / When / Then, TDD vs BDD

알아볼 키워드 - JUnit vs Spock