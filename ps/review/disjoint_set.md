# 분리 집합(disjoint set)

## 분리 집합이란?

서로 중복되지 않는 부분 집합들로 나눠진 원소들에 대한 정보를 저장하고 조작하는 자료구조

> 핵심은 각 집합의 대표 원소를 저장하는 것  
> 대표 원소와 하위 원소는 트리 구조로 연결되어 있다.

## 분리 집합의 연산

1. `Union(x, y)`: x가 속한 집합과 y가 속한 집합을 합치는 연산
2. `Find(x)`: x가 속한 집합을 반환하는 연산

## 분리 집합의 구현

```cpp
int parent[MAX_SIZE];

void init(int n) {
    for (int i = 0; i < n; i++) {
        parent[i] = i;
    }
}

int Find(int x) {
    if (x == parent[x]) {
        return x;
    }
    return parent[x] = Find(parent[x]);
}

void Union(int x, int y) {
    x = find(x);
    y = find(y);
    if(x == y) return;
    
    if (x < y) parent[y] = x;
    else parent[x] = y;
}
```

Find 메서드에서 `parent[x] = Find(parent[x])`를 통해 경로 압축을 수행한다.  
(트리의 높이가 줄어들어 시간 복잡도를 줄인다 - 상수 시간에 수렴)  

Union 메서드에서 x와 y의 크기를 비교하는 로직은,  
부모를 일관되게 정하기 위해 사용한다. (더 작은 원소를 부모로 설정)  
(이 로직은 다양하게 변형될 수 있다.)

## 분리 집합의 활용

- 그래프 알고리즘에서 연결 요소 찾기
- 최소 신장 트리 알고리즘(Kruskal)
- 각 원소를 연결하는 문제

> 문자열에서 중간 문자열을 삭제해야 할 때,  
> 이를 리스트로 구현하지 않으면 O(N)이 걸릴 수 있다.  
> 이를 분리 집합을 사용하면 효율적으로 처리할 수 있다.

> 결국 분리 집합의 활용의 핵심은  
> 원소 사이의 연결을 효율적으로 처리하는 것이다.

## 분리 집합 문제들

1717  
분리 집합의 기본적인 문제

1976  
주어진 edge들을 이용해 parent를 설정하고,  
같은 집합에 속하는지 확인하는 문제

1043  
진실을 아는 사람들을 union하고,  
진실을 아는 사람이 아닌 사람들의 파티를 찾는 문제

4195  
분리 집합 + 해시 문제  
새로운 문자열이 입력되면 그에 맞는 해시값을 반환하고,  
해시값에 대한 분리 집합을 만들어 연결되어 있는 친구의 수를 찾는 문제  
(이때 루트에만 친구의 수를 저장한다)

20040  
분리 집합을 이용해 사이클이 있는지 확인하는 문제  
두 점의 루트 값이 같다면 사이클이 있다 -> 종료  
없다면 Union하고 계속 진행

## 다시 한번 볼 문제들