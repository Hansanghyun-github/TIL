### 정규화 과정

정규화 과정은 릴레이션 간의 잘못된 종속 관계로 인해 DB 이상 현상이 일어나서 이를 해결하거나, 저장 공간을 효율적으로 사용하기 위해 릴레이션을 여러 개로 분리하는 과정입니다.

정규화된 정도는 정규형(NF, Normal Form)으로 표현한다.

|정규형|의미|
|--|--|
|1NF|모든 attribute의 값은 atomic해야 한다.|
|2NF|부분종속함수제거(non-prime attribute는 key를 partial FD 하면 안됨)|
|--|(다른표현)후보키의 진부분집합으로는 함수적종속성을 만족x|
|3NF|이행종속함수제거(non-prime attribute끼리 FD하면 안됨)|
|--|(다른표현) trivial or a '전부'가 슈퍼키여야 한다 or a에는 없고 b에는 있는 attribute중 하나가 후보키에 소속되야 한다|
|BCNF|모든 non-prime attribute는 X에 오면 안됨|
|--|(다른표현) trivial or a '전부'가 슈퍼키여야 한다|

(모든 정규화는 앞의 정규화를 만족해야한다)

(BCNF와 종속성 보존을 둘다 만족하지 못할수있다)

> 정규형 과정을 거친다고 성능이 100% 좋아지는 것은 아님
>
> 좋아질수도 나빠질수도 있음 
>
> 테이블을 나누게 되면 어떤 쿼리는 조인을 해야해서 느려질수 있다 -> 이때는 반정규화 필요

---

#### `반정규화(Denormalization)`

시스템의 성능 향상, 개발 및 운영의 편의성 등을 위해 정규화된 데이터 모델을 통합, 중복, 분리하는 과정으로 의도적으로 정규화 원칙을 위배하는 행위

반정규화를 수행하면 시스템의 성능이 향상되고 관리 효율성을 증가시키지만 데이터의 일관성 및 정합성이 저하될 수 있다.

`반정규화의 대상`<br>
- 디스크 I/O량이 많아 성능저하
- 경로가 너무 멀어 조인으로 성능저하
- 컬럼을 계산하여 읽을 때 성능 저하

> 반정규화를 위해서는 사전에 데이터의 일관성과 무결성을 우선으로 할지, DB의 성능과 단순화를 우선으로 할지를 결정해야 함

`반정규화 방법`

테이블 병합, 테이블 분할, 중복 테이블 추가, 중복 속성 추가 등이 있다.

|기법분류|기법|내용|
|--|--|--|
|테이블 병합|1:1 관계|1:1 관계를 통합하여 성능향상|
|--|1:M 관계|1:M 관계를 통합하여 성능향상|
|--|슈퍼/서브타입|슈퍼/서브 관계를 통합하여 성능 향상|
|테이블 분할|수직분할|컬럼 단위의 테이블을 디스크 I/O를 분산처리하기 위해 테이블을 1:1로 분리하여 성능향상(트랜잭션의 처리되는 유형파악이 선행되어야 함)|
|--|수평분할|행(레코드)단위로 집중 발생되는 트랜잭션을 분석하여 디스크 I/O 및 데이터 접근의 효율성을 높여 성능을 향상하기 위해 행 단위로 테이블을 쪼갬|
|테이블 추가|중복테이블 추가|다른 업무이거나 서버가 다른 경우 동일한 테이블 구조를 중복하여 원격 조인을 제거하고 성능을 향상|
|--|통계테이블 추가|SUM, AVG 등을 미리 수행하여 계산해 둠으로써 조회 시 성능을 향상|
|--|이력테이블 추가|이력테이블 중에서 마스터 테이블에 존재하는 레코드를 중복하여 이력 테이블에 존재하는 방법|

---